<html>
<head>
    <meta charset="utf-8">
    <title>编译Android系统源代码的步骤</title>
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/blog.css">
</head>
<body>

<div class="container">
    <div class="blog-header">
        <h3 class="blog-title">学到老，活到老</h3>
        <hr/>
    </div>

    <div class="row col-sm-12 blog-main">
        <div class="blog-post">
            <h3 class="blog-post-title">
                编译Android系统源代码的步骤
            </h3>
            <p>本文简要介绍编译安卓系统源代码所需要的步骤、工具、下载地址等。主要参考了《Android系统源代码情景分析》。
源码分为两部分：安卓系统源代码(AOSP, Android Open Source Project)和安卓内核所使用的linux源代码。</p>
<ol>
<li>安卓源代码的编译环境推荐使用Ubuntu系统，可以从<a href="http://ftp.sjtu.edu.cn/ubuntu-cd/">sjtu</a>下载。可以使用最新的64位版本。</li>
<li>下载安装虚拟机<a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a>。</li>
<li>使用vbox安装ubuntu，并安装如下包：
<code>sudo apt-get install git-core gnupg flex bison gperf libsdl-dev libesd0-dev libwxgtk2.6-dev build-essential zip curl valgrind</code></li>
<li>安装repo工具：
<code>wget https://dl-ssl.google.com/dl/googlesource/git-repo/repo
chmod a+x repo
sudo mv repo /bin/</code></li>
<li>下载源代码：
<code>mkdir android;
cd android;
repo init -u https://android.googlesource.com/platform/manifest
repo sync</code></li>
<li>编译源代码：
<code>make</code></li>
<li>使用安卓模拟器来运行编译出来的代码：
<code>~/android/out/host/linux-x86/bin/emulator</code>
如果运行模拟器报错：
<code>SDL init failure, reason is: No available video device</code>
可以参照<a href="http://blog.sina.com.cn/s/blog_66c16c980101g5qj.html">这篇帖子</a>所说的方法安装依赖包。</li>
</ol>
<h2>接下来可以编译android所使用的linux内核源代码</h2>
<p><code>mkdir kernel; cd kernel;
git clone http://android.googlesource.com/kernel/goldfish.git
git checkout remotes/origin/android-goldfish-2.6.29
export PATH=$PATH:~/android-2.3.1/prebuilt/linux-x86/toolchain/arm-eabi-4.4.3/bin</code></p>
<p>1.
<code>make goldfish_defconfig
make</code></p>
        </div>
    </div>

</div>
</body>
</html>