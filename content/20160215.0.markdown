---
title: "及时更新终端浏览器或CDN上缓存的静态文件的技巧"
date: 2016-02-15 11:39
categories:
slug:
---
用过CDN服务的网站运维人员肯定都有过这样的经历：网站静态文件更新，CDN却存在部分区域没有更新,而导致终端用户访问异常，如果是重要的css、js或网站首页图片等文件没有及时在CDN上更新，那访问结果更可怕！！！
    
由于现在CDN服务商主要还是采用squid来搞CDN，而squid是针对url来判断存储路径的，若网站设计者在重要的css等静态文件url后面加上"?v=20110611"类似的版本参数，每次网站文件更新就修改相应的"?v="参数，那么对于CDN-squid来说就属于新的url，必须去源站重新抓取数据返回给终端,就可以保证重要的文件及时更新；在静态文件css、js后面加"?=v"参数也可以让终端本地浏览器缓存内容失效，保证访问正常。