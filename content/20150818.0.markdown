---
title: "发现了一个有意思的项目heim"
date: 2015-08-18 20:59
categories:
slug: 
---

最近发现了一个有意思的项目
<a href="https://github.com/euphoria-io/heim" target="_blank">heim</a>，
是一个实时网页聊天系统。[euphoria.io](https://euphoria.io/)是基于这个项目运行的网站。

有意思的是，当我自己试着编译运行这个项目遇到问题时，试着用我蹩脚的英语在
[welcom聊天室](https://euphoria.io/room/welcome/)里提出了该问题，很快得到了项目作者的回应，
并跟着我一步一步排查问题，最后终于找到了问题之所在。具体交流的内容可以在这个聊天室里看到，
时间是今天中午左右。用户名分别是hi和chromakode。当然，随着时间的推移，当时的聊天内容被越来越多的新内容覆盖，你需要不断的向上滚动才能够找到它们。

具体的问题是在docker环境中总是找不到gulp。在heim的readme里给出了编译运行项目的五个步骤：

1. Install `git`, [`docker`](https://docs.docker.com/installation/), and
   [`docker-compose`](https://docs.docker.com/compose/install/).

2. Link in our dependencies repository:
    1. Clone [heim-deps](https://github.com/euphoria-io/heim-deps).
    2. `./heim-deps/deps.sh link ./path/to/heim/repo`

3. Build the client static files: `docker-compose run frontend`.

4. Init your db: `docker-compose run upgradedb sql-migrate up`.

5. Start the server: `docker-compose up backend`.


解决的方法是在执行完第二步之后，手动进行目录的软连接，假设当前目录是heim的父目录，
heim与heim-deps项目同在当前这个目录：

```
rm -rf ./heimpath/repo/deps/node_modules
```

```
ln -rs ./heim-deps/godeps heimpath/repo/deps/godeps
```

```
ln -rs ./heim-deps/node_modules heimpath/repo/deps/node_modules
```

也有可能是需要进行如下操作：

```
 rm -rf ./heimpath/deps/node_modules/
```

```
 ln -rs ./heim-deps/node_modules ./heimpath/deps/node_modules
 ```